---
plan: 01-01
phase: 01-proxy-session-audit
title: Add DataImpulse Provider & Fix Health Checks
wave: 1
depends_on: []
files_modified:
  - dolphin/sources/proxies/dataimpulse.py (new)
  - dolphin/sources/proxies/__init__.py
  - dolphin/sources/proxy_health.py
autonomous: true
---

# Plan 01-01: Add DataImpulse Provider & Fix Health Checks

## Objective

Add proper DataImpulse provider detection and increase proxy health check reliability.

## Context

Research shows DataImpulse uses:
- Host: `gw.dataimpulse.com`
- Rotating port: 823
- Sticky ports: 10000+ (each port = different session)
- Username can have geo parameters: `user__cr.us;state.california:pass`

Current proxy health checks timeout at 10 seconds which is too short for residential proxies.

## Tasks

<task id="1">
Create DataImpulse provider in `dolphin/sources/proxies/dataimpulse.py`:
- Match URLs containing `dataimpulse.com` or `gw.dataimpulse.com`
- Detect session type from port (823 = rotating, 10000+ = sticky)
- Parse geo parameters from username if present
- Return ProxyConfig with provider="dataimpulse"
</task>

<task id="2">
Register DataImpulse provider in `dolphin/sources/proxies/__init__.py`:
- Import DataImpulseProvider
- Add to PROVIDERS list
</task>

<task id="3">
Increase proxy health check timeout in `dolphin/sources/proxy_health.py`:
- Change default timeout from 10.0 to 30.0 seconds
- Residential proxies are slower than datacenter
</task>

<task id="4">
Add logging to proxy health checker:
- Log which provider was detected
- Log connection time for debugging
- Log specific error types (timeout vs connection refused)
</task>

## Verification

```bash
# Test DataImpulse provider detection
python3 -c "
from sources.proxies import get_provider, normalize_proxy
url = 'http://user__cr.us:pass@gw.dataimpulse.com:10016'
p = get_provider(url)
print(f'Provider: {p.name if p else \"unknown\"}')
config = normalize_proxy(url)
print(f'Config: {config}')
"

# Test health check with longer timeout
python3 -c "
import asyncio
from sources.proxy_health import ProxyHealthChecker
async def test():
    checker = ProxyHealthChecker()
    # Test with a sample proxy
    result = await checker.check('http://test:test@gw.dataimpulse.com:823')
    print(f'Health: {result.status}, Error: {result.error}')
asyncio.run(test())
"
```

## must_haves

- [ ] DataImpulse URLs are recognized (not "unknown" provider)
- [ ] Proxy health check timeout is 30 seconds
- [ ] Health checker logs provider name and timing
